{"version":3,"sources":["../../../../src/js/components/Tabs/index.js"],"names":["last","arr","pre","base","length","indexOf","replace","split","Tabs","state","showingPlus","handleBarClick","e","stopPropagation","props","createTab","handleTabClick","index","preventDefault","setActiveTab","handleRemoveClick","instance","removeTab","id","removePlus","setState","showPlus","style","active","tabs","context","instances","map","title","summary","promptPrefix","maximise","maxWidth","displayName","propTypes","object","string","func","defaultProps","contextTypes","array","bool"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Tab, TabBar, TabBarEmpty, TabClose, TabPlus } from './styled-elements';\r\n\r\nfunction last(arr, pre = '') {\r\n  let base = arr.length > 2 ? `${arr[arr.length - 2]}` : '';\r\n  if (base.indexOf(`${pre}> `) !== 0) {\r\n    base = 'bash';\r\n  }\r\n  return base.replace(`${pre}> `, '').split(' ')[0];\r\n}\r\n\r\nclass Tabs extends Component {\r\n  static displayName = 'Tabs';\r\n\r\n  static propTypes = {\r\n    style: PropTypes.object, // eslint-disable-line\r\n    active: PropTypes.string,\r\n    setActiveTab: PropTypes.func,\r\n    removeTab: PropTypes.func,\r\n    createTab: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    style: {},\r\n  };\r\n\r\n  static contextTypes = {\r\n    instances: PropTypes.array,\r\n    maximise: PropTypes.bool,\r\n  };\r\n\r\n  state = {\r\n    showingPlus: false,\r\n  };\r\n\r\n  handleBarClick = (e) => {\r\n    e.stopPropagation();\r\n    this.props.createTab();\r\n  };\r\n\r\n  // handle clicking a tab\r\n  handleTabClick = (e, index) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.setActiveTab(index);\r\n  };\r\n\r\n  // handle remove clicked\r\n  handleRemoveClick = (e, index, instance) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.removeTab(index, instance.props.id);\r\n    return false;\r\n  };\r\n\r\n  removePlus = () => {\r\n    if (this.state.showingPlus) {\r\n      this.setState({ showingPlus: false });\r\n    }\r\n  }\r\n\r\n  showPlus = () => {\r\n    if (!this.state.showingPlus) {\r\n      this.setState({ showingPlus: true });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { showingPlus } = this.state;\r\n    const { style, active } = this.props;\r\n    const tabs = this.context.instances.map(({ index, instance }) => {\r\n      const title = (instance && instance.state) ? last(instance.state.summary, instance.state.promptPrefix) : 'bash';\r\n      return (\r\n        <Tab\r\n          key={index}\r\n          active={active === index}\r\n          onClick={e => this.handleTabClick(e, index)}\r\n          onFocus={e => this.handleTabClick(e, index)}\r\n          title={title}\r\n          tabIndex={0}\r\n        >\r\n          {this.context.instances.length > 1 && (\r\n            <TabClose\r\n              title=\"Close Tab\"\r\n              onMouseDown={e => this.handleRemoveClick(e, index, instance)}\r\n            >\r\n              x\r\n            </TabClose>\r\n          )}\r\n          {title}\r\n        </Tab>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <TabBar\r\n        style={{\r\n          ...style,\r\n          ...(this.context.maximise ? { maxWidth: '100%' } : {}),\r\n        }}\r\n      >\r\n        {tabs}\r\n        <TabBarEmpty\r\n          onMouseEnter={this.showPlus}\r\n          onMouseLeave={this.removePlus}\r\n        >\r\n          <TabPlus\r\n            visible={showingPlus}\r\n            onClick={this.handleBarClick}\r\n          >+\r\n          </TabPlus>\r\n        </TabBarEmpty>\r\n      </TabBar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Tabs;\r\n"]}