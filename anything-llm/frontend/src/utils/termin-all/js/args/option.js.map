{"version":3,"sources":["../../../src/js/args/option.js"],"names":["name","description","defaultValue","init","usage","assignShort","n","options","short","find","flagName","charAt","toUpperCase","constructor","String","details","Array","concat","Error","length","optionDetails","filter","item","defaultIsWrong","handleType","push"],"mappings":"2UAAe,SAAUA,IAAV,CAAgBC,WAAhB,CAA6BC,YAA7B,CAA2CC,IAA3C,CAAiD,CAC9D,GAAIC,OAAQ,EAAZ,CAEMC,YAAc,SAACC,CAAD,CAAIC,OAAJ,CAAaC,KAAb,CAAuB,CAIzC,MAHID,SAAQE,IAAR,CAAa,yBAAYC,UAASN,KAAT,CAAe,CAAf,IAAsBI,KAAlC,CAAb,CAGJ,GAFEA,MAAQF,EAAEK,MAAF,CAAS,CAAT,EAAYC,WAAZ,EAEV,EAAO,CAACJ,KAAD,CAAQF,CAAR,CACR,CAPD,CAWA,OAAQN,KAAKa,WAAb,EACE,IAAKC,OAAL,CACEV,MAAQC,YAAYL,IAAZ,CAAkB,KAAKe,OAAL,CAAaR,OAA/B,CAAwCP,KAAKW,MAAL,CAAY,CAAZ,CAAxC,CADV,CAEE,MACF,IAAKK,MAAL,CACEZ,MAAQA,MAAMa,MAAN,CAAajB,IAAb,CADV,CAEE,MACF,QACE,KAAM,IAAIkB,MAAJ,CAAU,yBAAV,CAAN,CARJ,CAYA,GAAmB,CAAf,OAAMC,MAAN,EAAsC,CAAlB,OAAM,CAAN,EAASA,MAAjC,CACE,KAAM,IAAID,MAAJ,CAAU,+CAAV,CAAN,CAGF,GAAME,eAAgB,CACpBlB,yBADoB,CAEpBE,WAFoB,CAGpBH,uBAHoB,CAAtB,CAMA,GAA+E,CAA3E,QAAKc,OAAL,CAAaR,OAAb,CAAqBc,MAArB,CAA4B,qBAAQC,MAAKlB,KAAL,CAAW,CAAX,IAAkBA,MAAM,CAAN,CAA1B,CAA5B,EAAgEe,MAApE,CAAkF,CAChF,GAAII,eAAJ,CAiBA,GAbIA,cAaJ,MAfQrB,YAeR,EAXO,IAWP,GAfQA,YAeR,WAfQA,YAeR,CAAI,CAACqB,cAAL,CAAqB,CAEnBH,cAAcjB,IAAd,CADqC,UAAhB,QAAOA,KACP,CAAeA,IAAf,CAAsB,KAAKqB,UAAL,CAAgBtB,YAAhB,EAA8B,CAA9B,CAC5C,CAGD,KAAKa,OAAL,CAAaR,OAAb,CAAqBkB,IAArB,CAA0BL,aAA1B,CACD,CAGD,MAAO,KACR,C","file":"option.js","sourcesContent":["export default function (name, description, defaultValue, init) {\r\n  let usage = [];\r\n\r\n  const assignShort = (n, options, short) => {\r\n    if (options.find(flagName => flagName.usage[0] === short)) {\r\n      short = n.charAt(0).toUpperCase(); // eslint-disable-line no-param-reassign\r\n    }\r\n    return [short, n];\r\n  };\r\n\r\n  // If name is an array, pick the values\r\n  // Otherwise just use the whole thing\r\n  switch (name.constructor) {\r\n    case String:\r\n      usage = assignShort(name, this.details.options, name.charAt(0));\r\n      break;\r\n    case Array:\r\n      usage = usage.concat(name);\r\n      break;\r\n    default:\r\n      throw new Error('Invalid name for option');\r\n  }\r\n\r\n  // Throw error if short option is too long\r\n  if (usage.length > 0 && usage[0].length > 1) {\r\n    throw new Error('Short version of option is longer than 1 char');\r\n  }\r\n\r\n  const optionDetails = {\r\n    defaultValue,\r\n    usage,\r\n    description,\r\n  };\r\n\r\n  if (this.details.options.filter(item => item.usage[1] === usage[1]).length === 0) {\r\n    let defaultIsWrong;\r\n\r\n    switch (defaultValue) {\r\n      case false:\r\n        defaultIsWrong = true;\r\n        break;\r\n      case null:\r\n        defaultIsWrong = true;\r\n        break;\r\n      case undefined:\r\n        defaultIsWrong = true;\r\n        break;\r\n      default:\r\n        defaultIsWrong = false;\r\n    }\r\n\r\n    // Set initializer depending on type of default value\r\n    if (!defaultIsWrong) {\r\n      const initFunction = typeof init === 'function';\r\n      optionDetails.init = initFunction ? init : this.handleType(defaultValue)[1];\r\n    }\r\n\r\n    // Register option to global scope\r\n    this.details.options.push(optionDetails);\r\n  }\r\n\r\n  // Allow chaining of .option()\r\n  return this;\r\n}\r\n"]}