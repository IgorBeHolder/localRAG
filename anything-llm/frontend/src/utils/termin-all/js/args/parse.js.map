{"version":3,"sources":["../../../src/js/args/parse.js"],"names":["argv","options","Object","assign","config","help","option","command","showHelp","raw","slice","minimist","version","checkVersion","parent","subCommand","_","helpTriggered","h","args","defined","isDefined","optionList","getOptions","shift","sub","runCommand"],"mappings":"mYAEe,SAAUA,IAAV,CAAgBC,OAAhB,CAAyB,CAEtCC,OAAOC,MAAP,CAAc,KAAKC,MAAnB,CAA2BH,OAA3B,CAFsC,CAIlC,KAAKG,MAAL,CAAYC,IAJsB,GAMpC,KAAKC,MAAL,CAAY,MAAZ,CAAoB,0BAApB,CANoC,CAOpC,KAAKC,OAAL,CAAa,MAAb,CAAqB,cAArB,CAAqC,KAAKC,QAA1C,CAPoC,EAWtC,KAAKC,GAAL,CAAW,uBAAOT,KAAKU,KAAL,CAAW,CAAX,CAAP,CAAsB,KAAKN,MAAL,CAAYO,QAAlC,CAX2B,CAclC,KAAKP,MAAL,CAAYQ,OAdsB,EAepC,KAAKC,YAAL,CAAkB,KAAKC,MAAvB,CAfoC,CAkBtC,GAAMC,YAAa,KAAKN,GAAL,CAASO,CAAT,CAAW,CAAX,CAAnB,CACMC,cAAgB,KAAKR,GAAL,CAASS,CAAT,EAAc,KAAKT,GAAL,CAASJ,IAD7C,CAGMc,KAAO,EAHb,CAIMC,QAAU,KAAKC,SAAL,CAAeN,UAAf,CAA2B,UAA3B,CAJhB,CAKMO,WAAa,KAAKC,UAAL,CAAgBH,OAAhB,CALnB,CAlBsC,OAyBtClB,OAAOC,MAAP,CAAcgB,IAAd,CAAoB,KAAKV,GAAzB,CAzBsC,CA0BtCU,KAAKH,CAAL,CAAOQ,KAAP,EA1BsC,CA6BtC,KAAKC,GAAL,CAAWN,KAAKH,CA7BsB,CAgClCI,OAhCkC,GAiCpC,KAAKM,UAAL,CAAgBN,OAAhB,CAAyBE,UAAzB,CAjCoC,CAkC7B,EAlC6B,GAuClC,KAAKlB,MAAL,CAAYC,IAAZ,EAAoBY,aAvCc,EAwCpC,KAAKT,QAAL,EAxCoC,CA4C/Bc,UA5C+B,CA6CvC,C","file":"parse.js","sourcesContent":["import parser from 'minimist';\r\n\r\nexport default function (argv, options) {\r\n  // Override default option values\r\n  Object.assign(this.config, options);\r\n\r\n  if (this.config.help) {\r\n    // Register default options and commands\r\n    this.option('help', 'Output usage information');\r\n    this.command('help', 'Display help', this.showHelp);\r\n  }\r\n\r\n  // Parse arguments using minimist\r\n  this.raw = parser(argv.slice(1), this.config.minimist);\r\n\r\n  // If default version is allowed, check for it\r\n  if (this.config.version) {\r\n    this.checkVersion(this.parent);\r\n  }\r\n\r\n  const subCommand = this.raw._[1];\r\n  const helpTriggered = this.raw.h || this.raw.help;\r\n\r\n  const args = {};\r\n  const defined = this.isDefined(subCommand, 'commands');\r\n  const optionList = this.getOptions(defined);\r\n\r\n  Object.assign(args, this.raw);\r\n  args._.shift();\r\n\r\n  // Export sub arguments of command\r\n  this.sub = args._;\r\n\r\n  // If sub command is defined, run it\r\n  if (defined) {\r\n    this.runCommand(defined, optionList);\r\n    return {};\r\n  }\r\n\r\n  // Show usage information if \"help\" or \"h\" option was used\r\n  // And respect the option related to it\r\n  if (this.config.help && helpTriggered) {\r\n    this.showHelp();\r\n  }\r\n\r\n  // Hand back list of options\r\n  return optionList;\r\n}\r\n"]}